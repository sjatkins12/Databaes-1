{% extends "base.html" %}
{% load static %}

{% block title %}
    <title>CrateUrself</title>
{% endblock %}

{% block style %}
    <style type="text/css">
        .counter {
            background: #222;
            -moz-box-shadow: inset 0 0 5px #000000;
            -webkit-box-shadow: inset 0 0 5px #000000;
            box-shadow: inset 0 0 5px #000000;
            min-height: 125px;
            text-align: center;
        }

        .counter h3 {
            color: #E5E5E5;
            font-size: 14px;
            font-style: normal;
            font-variant: normal;
            font-weight: lighter;
            letter-spacing: 1px;
            padding-top: 20px;
            margin-bottom: 30px;
        }

        #countdown {
            color: #FFFFFF;
        }

        #countdown span {
            color: #E5E5E5;
            font-size: 26px;
            font-weight: normal;
            margin-left: 20px;
            margin-right: 20px;
            text-align: center;
        }

        .highlight:hover {
            background-color: #b4bcc2;
        }
    </style>
{% endblock %}

{% block script %}
    <script type="text/javascript">
        // Script runs immediately when page is loaded
        window.onload = function () {
            // set the date we're counting down to
            var target_date = new Date('{{ cycle_date.year }}, {{ cycle_date.month }}, {{ cycle_date.day }}').getTime();

            // variables for time units
            var days, hours, minutes, seconds;

            // get tag element
            var countdown = document.getElementById('countdown');

            // update the tag with id "countdown" every 1 second
            setInterval(function () {

                // find the amount of "seconds" between now and target
                var current_date = new Date().getTime();
                var seconds_left = (target_date - current_date) / 1000;

                // do some time calculations
                days = parseInt(seconds_left / 86400);
                seconds_left = seconds_left % 86400;

                hours = parseInt(seconds_left / 3600);
                seconds_left = seconds_left % 3600;

                minutes = parseInt(seconds_left / 60);
                seconds = parseInt(seconds_left % 60);

                var display = '';

                var get_display_text = function (num, class_name, singular_unit, plural_unit) {
                    if (num > 0) {
                        display += '<span class=' + class_name + '>' + num;
                        if (num === 1) {
                            display += ' <b>' + singular_unit + '</b></span>'
                        } else {
                            display += ' <b>' + plural_unit + '</b></span>'
                        }
                    }
                };

                get_display_text(days, 'days', 'Day', 'Days');
                get_display_text(hours, 'hours', 'Hour', 'Hours');
                get_display_text(minutes, 'minutes', 'Minute', 'Minutes');
                get_display_text(seconds, 'seconds', 'Second', 'Seconds');

                // format countdown string + set tag value
                if (display.length === 0) {
                    display = '<b>Sorry. Voting has ended for this cycle.</b>'
                }
                countdown.innerHTML = display;

            }, 1000);
        }
    </script>


{% endblock %}

{% block content %}
    <!-- Navigation -->
    <nav id="mainNav" class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse"
                        data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand page-scroll" href="#page-top">CrateUrself</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#services">Service</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#crate">Crate</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#explore">Explore</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#team">Team</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#contact">Contact</a>
                    </li>
                    {% if user.is_authenticated %}
                        <li role="presentation" class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button"
                               aria-haspopup="true"
                               aria-expanded="false">
                                Account <span class="caret"></span></a>
                            <ul class="dropdown-menu dropdown-menu-right">
                                <li style=>
                                    <a style="color:black" href="/account/settings">Account Settings</a>
                                </li>
                                <li style=>
                                    <a style="color:black" href="/payments/subscriptions">Manage Subscriptions</a>
                                </li>
                                <li style=>
                                    <a style="color:black" href="/account/logout">Logout</a>
                                </li>
                            </ul>
                        </li>
                    {% else %}
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown"><b>Login</b> <span
                                    class="caret"></span></a>
                            <ul id="login-dp" class="dropdown-menu">
                                <li>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <form class="form" role="form" method="post" action="/account/login/"
                                                  accept-charset="UTF-8" id="login-nav">
                                                {% csrf_token %}
                                                <div class="form-group">
                                                    <input type="text" class="form-control" name="username"
                                                           placeholder="Username">
                                                </div>
                                                <div class="form-group">
                                                    <input type="password" class="form-control" name="password"
                                                           placeholder="Password">
                                                </div>
                                                <div class="form-group">
                                                    <button type="submit" class="btn btn-primary btn-block">Sign in
                                                    </button>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="bottom text-center" style="color:#000000;">
                                            New? <a href="/account/signup">
                                            <b style="color:#fed136;"> Sign up here.</b>
                                        </a>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    {% endif %}
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <!-- Header -->
    <header>
        <div class="container" id="page-top">
            <div class="intro-text">
                <div class="intro-lead-in">Don't find yourself</div>
                <div class="intro-heading">Crate Yourself</div>
                <a href="#services" class="page-scroll btn btn-xl">Learn More</a>
            </div>
        </div>
    </header>

    <!-- Services Section -->
    <!-- ICONS MUST BE 96x112 |  Kam - shouldnt matter as long as container is the same -->
    <section id="services" class="bg-light-gray">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Our Service</h2>
                    <h3 class="section-subheading text-muted">Crate Yourself is a monthly gift box service where each
                        month our customers receive a box full of items related to their interests.</h3>
                </div>
            </div>
            <div class="row text-center">
                <div class="col-md-4">
                    <!-- TODO: make the images the same size and resizable  -->
                    <img src="{% static 'images/test123.png' %}" class="img-responsive img-rounded" alt=""
                         style="width:304px;height:200px;margin: 0 auto;">
                    <h4 class="service-heading">Browse</h4>
                    <p class="text-muted">Browse through hundreds of amazing, breathtaking, and spectacular items
                        hand selected by the DataBaes Team.</p>
                </div>
                <div class="col-md-4">
                    <img src="{% static 'images/Subcribe.png' %}" class="img-responsive img-rounded" alt=""
                         style="width:304px;height:200px;margin: 0 auto;">
                    <h4 class="service-heading">Subscribe</h4>
                    <p class="text-muted">Subscribe to receive our fantastic products.</p>
                </div>
                <div class="col-md-4">
                    <img src="{% static 'images/deliver.png' %}" class="img-responsive img-rounded" alt=""
                         style="width:304px;height:200px;margin: 0 auto;">
                    <h4 class="service-heading">Receive</h4>
                    <p class="text-muted">Receive your monthly box today!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- crate Grid Section -->
    <!-- IMAGES NEED TO BE  360x260-->
    <!-- DONT USE PNG THEY LOOK BAD DUE TO NO BORDER-->
    <section id="crate">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Monthly Featured Crates</h2>
                    <h3 class="section-subheading text-muted">Vote for crates containing your favorite items!</h3>
                </div>
            </div>
            <div class="row">
                <!-- TODO: Make the p tag display a min height (some item names are very long) -->
                {% for interest_group, interest_data in interest_groups.items %}
                    <a href="{% url 'box_discussion' category_name=interest_data.category.category_name subcategory_name=interest_data.subcategory.subcategory_name interest_group_name=interest_group.interest_group_name %}">
                        <div class="col-md-4 col-sm-6 portfolio-item">
                            <div class="portfolio-caption highlight">
                                <img src="{{ interest_group.interest_group_image.url }}" class="img-responsive"
                                     style="display: block; margin: auto">
                                <h4 style="text-align: center">{{ interest_group.interest_group_name }}</h4>
                                {% if interest_group.interest_group_description %}
                                    <p class="text-muted"
                                       style="text-align: center">{{ interest_group.interest_group_description }}</p>
                                {% else %}
                                    <p class="text-muted" style="text-align: center">No description</p>
                                {% endif %}
                            </div>
                        </div>
                    </a>
                {% empty %}
                    <b class="col-lg-12 text-center">No Featured Monthly Boxes!</b>
                {% endfor %}
            </div>
        </div>
    </section>
    <!-- STOP MOVING THIS KAM -->
    <div class="counter">
        <h3>VOTING PERIOD ENDS IN:</h3>
        <div id="countdown">
        </div><!-- /#Countdown Div -->
    </div> <!-- /.Counter Div -->

    <!-- Explore Section -->
    <section id="explore" class="bg-light-gray">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Crates filled with random items!</h2>
                    <h3 class="section-subheading text-muted">Dozens of potential crates to choose from.</h3>
                    <a href="{% url 'category_list' %}" class="page-scroll btn btn-xl">Explore the categories</a>
                </div>
            </div>
        </div>
    </section>


    <!-- Team Section -->
    <section id="team">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Our Team</h2>
                    <h3 class="section-subheading text-muted">Our team is made up of five individuals.</h3>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-2 col-sm-offset-1">
                    <div class="team-member">
                        <img src="{% static 'images/tupac.jpg' %}" class="img-responsive img-circle" alt="">
                        <h4>Steven Tu</h4>
                        <p class="text-muted">Lead Designer</p>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="team-member">
                        <img src="{% static 'images/lawrence.jpg' %}" class="img-responsive img-circle" alt="">
                        <h4>Lawrence Qiu</h4>
                        <p class="text-muted">Lead Programmer</p>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="team-member">
                        <img src="{% static 'images/jesse.jpg' %}" class="img-responsive img-circle" alt="">
                        <h4>Jesse Rong</h4>
                        <p class="text-muted">Programmer</p>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="team-member">
                        <img src="{% static 'images/sam.jpg' %}" class="img-responsive img-circle" alt="">
                        <h4>Sam Atkins</h4>
                        <p class="text-muted">Programmer</p>
                    </div>
                </div>
                <div class="col-sm-2">
                    <div class="team-member">
                        <img src="{% static 'images/jesus.jpg' %}" class="img-responsive img-circle" alt="">
                        <h4>Kam Wai Li</h4>
                        <p class="text-muted">Data Engineer</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- TODO: Do we need a contact section? Could we make this a login/register section or something? -->
    <!-- Contact Section -->
    <section id="contact">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Contact Us</h2>
                    <h3 class="section-subheading text-muted">Please wait 3-5 business days for a response.</h3>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <form name="sentMessage" id="contactForm" novalidate>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Your Name *" id="name" required
                                           data-validation-required-message="Please enter your name.">
                                    <p class="help-block text-danger"></p>
                                </div>
                                <div class="form-group">
                                    <input type="email" class="form-control" placeholder="Your Email *" id="email"
                                           required data-validation-required-message="Please enter your email address.">
                                    <p class="help-block text-danger"></p>
                                </div>
                                <div class="form-group">
                                    <input type="tel" class="form-control" placeholder="Your Phone *" id="phone"
                                           required data-validation-required-message="Please enter your phone number.">
                                    <p class="help-block text-danger"></p>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <textarea class="form-control" placeholder="Your Message *" id="message" required
                                              data-validation-required-message="Please enter a message."></textarea>
                                    <p class="help-block text-danger"></p>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <div class="col-lg-12 text-center">
                                <div id="success"></div>
                                <button type="submit" class="btn btn-xl">Send Message</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <span class="copyright">Copyright &copy; Databaes 2017</span>
                </div>
                <div class="col-md-4">
                    <ul class="list-inline social-buttons">
                        <li><a href="https://www.facebook.com/CrateUrself-1587285857978476/"><i
                                class="fa fa-facebook"></i></a>
                        </li>
                        <li><a href="https://twitter.com/CrateUrself"><i class="fa fa-twitter"></i></a>
                        </li>

                    </ul>
                </div>
                <div class="col-md-4">
                    <ul class="list-inline quicklinks">
                        <li><a href="#">Privacy Policy</a>
                        </li>
                        <li><a href="#">Terms of Use</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>


    <!-- crate Modals -->
    <!-- Use the modals below to showcase details about your crate projects! -->

    <!-- crate Modal 1 -->
    <div class="crate-modal modal fade" id="crateModal1" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="close-modal" data-dismiss="modal">
                    <div class="lr">
                        <div class="rl">
                        </div>
                    </div>
                </div>
                <div class="container">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="modal-body">
                                <!-- Project Details Go Here -->
                                <h2>The Food Stamp Crate</h2>
                                <img class="img-responsive img-rounded" src="{% static 'images/dank.jpg' %}" alt="">
                                <p><strong>Dank</strong></p>
                                <p>Oh dear, look at you and your empty pocket. That's okay just take out a second
                                    mortgage on your home and subscribe to this dank box.</p>
                                <p><strong>What is included?</strong> In this dank crate, you'll receive one dank item
                                    plus two not so dank item.</p>

                                <button type="button" class="btn btn-default" data-dismiss="modal"><i
                                        class="fa fa-times"></i> Close
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- crate Modal 2 -->
    <div class="crate-modal modal fade" id="crateModal2" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="close-modal" data-dismiss="modal">
                    <div class="lr">
                        <div class="rl">
                        </div>
                    </div>
                </div>
                <div class="container">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="modal-body">
                                <h2>The Middle Class Crate</h2>
                                <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                                <img class="img-responsive img-centered" src="{% static 'images/dank.jpg' %}" alt="">
                                <p><a href="http://designmodo.com/startup/?u=787">Startup Framework</a> is a website
                                    builder for professionals. Startup Framework contains components and complex blocks
                                    (PSD+HTML Bootstrap themes and templates) which can easily be integrated into almost
                                    any design. All of these components are made in the same style, and can easily be
                                    integrated into projects, allowing you to create hundreds of solutions for your
                                    future projects.</p>
                                <p>You can preview Startup Framework <a
                                        href="http://designmodo.com/startup/?u=787">here</a>.</p>
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i
                                        class="fa fa-times"></i> Close Project
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- crate Modal 3 -->
    <div class="crate-modal modal fade" id="crateModal3" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="close-modal" data-dismiss="modal">
                    <div class="lr">
                        <div class="rl">
                        </div>
                    </div>
                </div>
                <div class="container">
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="modal-body">
                                <!-- Project Details Go Here -->
                                <h2>The Billgate Crate</h2>
                                <p class="item-intro text-muted">Lorem ipsum dolor sit amet consectetur.</p>
                                <img class="img-responsive img-centered" src="{% static 'images/dank.jpg' %}" alt="">
                                <p>Treehouse is a free PSD web template built by <a
                                        href="https://www.behance.net/MathavanJaya">Mathavan Jaya</a>. This is bright
                                    and spacious design perfect for people or startup companies looking to showcase
                                    their apps or other projects.</p>
                                <p>You can download the PSD template in this crate sample item at <a
                                        href="http://freebiesxpress.com/gallery/treehouse-free-psd-web-template/">FreebiesXpress.com</a>.
                                </p>
                                <button type="button" class="btn btn-default" data-dismiss="modal"><i
                                        class="fa fa-times"></i> Close Project
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}